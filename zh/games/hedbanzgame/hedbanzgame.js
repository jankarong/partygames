// 中文词汇 - 1000+ 常见词汇
const WORDS = [
    // 动物 (80)
    "狮子", "老虎", "大象", "长颈鹿", "斑马", "猴子", "企鹅", "鹰", "海豚", "鲨鱼",
    "狗", "猫", "熊", "兔子", "狐狸", "猫头鹰", "鹦鹉", "蛇", "鲸鱼", "蝴蝶",
    "蚂蚁", "蜜蜂", "蜘蛛", "青蛙", "鱼", "乌龟", "鳄鱼", "猪", "牛", "马",
    "鸡", "鸭子", "天鹅", "孔雀", "火烈鸟", "企鹅", "海鸥", "鹰", "鸽子", "鸽子",
    "麻雀", "知更鸟", "蓝鸟", "蜂鸟", "啄木鸟", "乌鸦", "乌鸦", "短吻鳄", "蜥蜴", "鬣蜥",
    "蟒蛇", "眼镜蛇", "陆龟", "蝾螈", "蟾蜍", "鲑鱼", "鳟鱼", "金枪鱼", "金鱼", "海马",
    "章鱼", "乌贼", "水母", "海星", "螃蟹", "龙虾", "虾", "豹", "美洲豹", "美洲狮",
    "美洲狮", "鬣狗", "狼", "郊狼", "豺", "獾", "水獭", "海狸", "松鼠", "花鼠",
    "仓鼠", "鼠", "鼠", "刺猬", "豪猪", "臭鼬", "浣熊", "袋鼠", "考拉", "熊猫",

    // 名人 (50)
    "成龙", "周杰伦", "李易峰", "唐艺昕", "张艺兴",
    "黄晓明", "章子怡", "范冰冰", "赵丽颖", "杨洋",
    "郑爽", "鹿晗", "朱一龙", "胡歌", "陈晓",
    "刘诗诗", "刘亦菲", "娜扎", "古力娜扎", "迪丽热巴",
    "姚晨", "马思纯", "宋祖儿", "李沁", "白鹿",
    "张钧甯", "江疏影", "陈情令演员", "王一博", "肖战",
    "张云龙", "罗晋", "唐嫣", "陈妍希", "林心如",
    "贾乃亮", "张檬", "张歆艺", "杨洋", "邓超",
    "邓紫棋", "陈学冬", "何炅", "谢娜", "李湘",
    "姚明", "李娜", "邓亚萍", "乔丹", "李晓鹏",

    // 物品 (100)
    "自行车", "电话", "电视", "电脑", "咖啡杯", "床", "门", "窗", "椅子", "桌子",
    "灯", "钟", "书", "笔", "帽子", "鞋", "勺子", "刀", "盘子", "手表",
    "汽车", "公交车", "火车", "飞机", "船", "房子", "建筑物", "城堡", "塔", "桥",
    "沙发", "沙发", "桌子", "柜子", "架子", "冰箱", "烤箱", "微波炉", "洗衣机", "手机",
    "平板电脑", "笔记本电脑", "显示器", "键盘", "鼠标", "耳机", "扬声器", "照相机", "镜子", "图片",
    "绘画", "花瓶", "锅", "锅", "水壶", "料理机", "烤面包机", "马桶", "浴缸", "淋浴",
    "包", "背包", "钱包", "手提包", "皮带", "围巾", "手套", "袜子", "衬衫", "裤子",
    "裙子", "夹克", "大衣", "毛衣", "T恤", "牛仔裤", "短裤", "靴子", "凉鞋", "拖鞋",
    "项链", "戒指", "手镯", "耳环", "眼镜", "太阳镜", "自行车", "摩托车", "滑板", "滑板车",
    "球", "足球", "篮球", "足球", "网球", "高尔夫球", "保龄球", "飞盘", "回力镖", "风筝",

    // 职业 (60)
    "医生", "教师", "厨师", "警察", "消防员", "飞行员", "护士", "宇航员", "艺术家", "音乐家",
    "律师", "法官", "会计师", "工程师", "建筑师", "电工", "管道工", "木工", "机械师", "农民",
    "科学家", "数学家", "外科医生", "牙医", "兽医", "摄影师", "摄像师", "演员", "歌手", "舞蹈演员",
    "喜剧演员", "导演", "制片人", "记者", "记者", "编辑", "作家", "小说家", "诗人", "画家",
    "雕刻家", "音乐家", "作曲家", "指挥家", "DJ", "教练", "教练员", "运动员", "裁判", "裁判",
    "厨师", "厨师", "面包师", "调酒师", "服务员", "女服务员", "主持人", "保安", "清洁工", "园丁",
    "花卉商", "美发师", "化妆师", "时装设计师", "室内设计师", "建筑师", "市长", "州长", "总统", "商人",

    // 活动 (80)
    "游泳", "跑步", "跳舞", "唱歌", "烹饪", "阅读", "绘画", "写作", "睡觉", "滑雪",
    "远足", "攀岩", "跳跃", "行走", "慢跑", "伸展", "锻炼", "举重", "拳击", "瑜伽",
    "冥想", "呼吸", "思考", "梦想", "笑", "哭", "微笑", "皱眉", "谈话", "听",
    "低语", "呼喊", "尖叫", "口哨", "哼唱", "弹吉他", "弹钢琴", "敲鼓", "绘画", "雕刻",
    "素描", "烹饪", "烘烤", "烧烤", "油炸", "沸腾", "清洁", "洗", "干燥", "烫",
    "折叠", "工作", "学习", "学习", "教学", "购物", "购买", "销售", "旅行", "探索",
    "进食", "饮水", "投掷", "接住", "踢", "推", "拉", "驾驶", "飞行", "冲浪",
    "建造", "创造", "制造", "修复", "维修", "打开", "关闭", "坐", "站立", "躺下",

    // 运动 (70)
    "足球", "篮球", "网球", "足球", "棒球", "冰球", "高尔夫", "保龄球", "拳击", "冲浪",
    "游泳", "跳水", "水球", "划船", "皮划艇", "骑自行车", "山地自行车", "滑雪", "滑雪板", "溜冰",
    "羽毛球", "乒乓球", "壁球", "手球", "曲棍球", "板球", "垒球", "美式足球", "橄榄球", "排球",
    "沙滩排球", "网球", "躲避球", "田径", "短跑", "长距离跑", "跳高", "跳远", "撑杆跳", "铅球",
    "体操", "攀岩", "摔跤", "空手道", "跆拳道", "柔道", "巴西柔术", "武术", "赛马", "骑术",
    "轮滑", "滑板", "跑酷", "射箭", "击剑", "剑道", "相扑", "举重", "踢拳", "综合格斗",
    "三项全能", "两项全能", "越野健身", "普拉提", "尊巴", "有氧运动", "舞蹈", "啦啦队", "花样滑冰", "速滑",

    // 电影 (70)
    "卧虎藏龙", "花木兰", "你的名字", "千与千寻", "龙猫", "哈尔的移动城堡", "天气之子", "风之谷",
    "鬼灭之刃电影", "我的hero学院电影", "进击的巨人电影", "红海行动", "战狼", "流浪地球", "哪吒之魔童降世", "白蛇缘起",
    "姜子牙", "创意总动员", "大护法", "修罗城", "昨日青空", "天竺鼠车神", "疯狂动物城", "超能陆战队",
    "冰雪奇缘", "冻结", "海洋奇缘", "灵魂", "长发公主", "勇敢传说", "灰姑娘", "睡美人", "白雪公主", "木偶奇遇记",
    "小飞象", "小鹿斑比", "森林王子", "阿拉丁", "大力神", "钟楼怪人", "泰山", "小美人鱼", "美女与野兽", "魔法奇缘",
    "利刃出鞘", "黑豹", "神奇女侠", "海王", "闪电侠", "教父", "低俗小说", "盗梦空间", "星际穿越", "阿凡达",
    "侏罗纪公园", "侏罗纪世界", "大白鲨", "蛇眼神兵", "上气", "沙丘", "黑客帝国", "星球大战", "魔戒", "霍比特人",

    // 电视节目 (40)
    "琅琊榜", "甄嬛传", "还珠格格", "三体", "延禧攻略", "长月烬明", "芸汐传", "知否知否",
    "我的前半生", "香蜜沉沉烬如霜", "一吻定情", "陈情令", "浪漫的事", "放开我北鼻", "老九门", "鬼吹灯",
    "楚乔传", "独步天下", "如懿传", "昭和元禄落语心中", "新白娘子传奇", "中华小当家", "宝莲灯", "情深深雨蒙蒙",
    "西游记", "水浒传", "三国演义", "红楼梦", "四大名著", "十年三月三十日", "有翡", "最初的相遇最后的别离",
    "请回答1988", "来自星星的你", "鬼怪", "冬季恋歌", "传闻中的陈芊芊", "刺客列传", "重生之门", "山河令",

    // 食物 (100)
    "饺子", "馄饨", "面条", "米饭", "馒头", "包子", "蒸饭", "炒饭", "鸡蛋炒饭", "番茄鸡蛋面",
    "宫保鸡丁", "麻婆豆腐", "红烧肉", "糖醋里脊", "回锅肉", "东坡肉", "清蒸鱼", "吸汤羊肉", "火锅", "水煮鱼",
    "四川菜", "粤菜", "湘菜", "北京烤鸭", "淮扬菜", "台湾炒饭", "沙县小吃", "螺蛳粉", "兰州拉面", "重庆小面",
    "春卷", "煎饺", "水饺", "鲅鱼馅饼", "葱油饼", "烤鸭", "烤乳猪", "糖醋鲤鱼", "东坡肉", "咕噜肉",
    "茶叶蛋", "皮蛋", "腊肠", "腊肉", "金华火腿", "榨菜", "梅菜扣肉", "炖汤", "老火汤", "清汤",
    "牛肉面", "炸酱面", "凉面", "汤面", "馄饨汤", "麻辣烫", "串串香", "烧烤", "烤肉", "涮羊肉",
    "豆腐", "豆浆", "油条", "豆干", "腐竹", "千页豆腐", "黑木耳", "银耳", "冬虫夏草", "燕窝",
    "冰糖", "红糖", "蜂蜜", "枸杞", "红枣", "桂圆", "葡萄干", "坚果", "瓜子", "花生",
    "山楂", "柚子", "橙子", "苹果", "梨", "猕猴桃", "芒果", "榴莲", "荔枝", "龙眼",
    "粽子", "月饼", "汤圆", "元宵", "年糕", "发糕", "杂粮粥", "黑米粥", "绿豆粥", "红豆粥",

    // 国家 (60)
    "法国", "日本", "埃及", "巴西", "加拿大", "澳大利亚", "印度", "德国", "墨西哥", "意大利",
    "西班牙", "葡萄牙", "希腊", "土耳其", "俄罗斯", "中国", "韩国", "越南", "泰国", "菲律宾",
    "印度尼西亚", "马来西亚", "新加坡", "香港", "台湾", "巴基斯坦", "孟加拉国", "斯里兰卡", "尼泊尔", "不丹",
    "伊朗", "伊拉克", "沙特阿拉伯", "阿联酋", "以色列", "黎巴嫩", "叙利亚", "约旦", "苏丹", "利比亚",
    "突尼斯", "摩洛哥", "阿尔及利亚", "肯尼亚", "坦桑尼亚", "乌干达", "南非", "津巴布韦", "尼日利亚", "加纳",
    "美国", "英国", "爱尔兰", "苏格兰", "威尔士", "瑞典", "挪威", "芬兰", "丹麦", "波兰",
    "捷克", "匈牙利", "罗马尼亚", "保加利亚", "克罗地亚", "塞尔维亚", "奥地利", "瑞士", "比利时", "荷兰",

    // 情感 (60)
    "快乐", "伤心", "生气", "惊讶", "害怕", "兴奋", "困惑", "自豪", "紧张", "放松",
    "焦虑", "有压力", "沮丧", "乐观", "悲观", "嫉妒", "羡慕", "感谢", "羞愧", "尴尬",
    "自信", "不自信", "勇敢", "胆怯", "决定", "动力", "气馁", "沮丧", "恼怒", "烦躁",
    "逗笑", "娱乐", "无聊", "兴趣", "好奇", "厌恶", "着迷", "喜欢", "冷漠", "热情",
    "冷漠", "精力充沛", "昏昏欲睡", "平静", "激动", "和平", "动荡", "高兴", "高兴", "满意",
    "满足", "满意", "不满", "不满", "不安", "平静", "有爱心", "讨厌", "亲切", "冷淡",

    // 身体部位 (50)
    "头", "大脑", "眼睛", "鼻子", "嘴", "牙齿", "舌头", "耳朵", "头发", "脸",
    "颈", "肩膀", "手臂", "肘", "手", "手指", "大拇指", "胸部", "胃", "背",
    "腰", "臀部", "腿", "膝盖", "脚踝", "脚", "脚趾", "脚跟", "胫骨", "大腿",
    "心", "肺", "肝", "肾", "皮肤", "骨", "肌肉", "血管", "动脉", "神经",
    "指甲", "眉毛", "睫毛", "嘴唇", "下巴", "脸颊", "额头", "手掌", "手腕", "肋",

    // 饮料 (40)
    "水", "咖啡", "茶", "果汁", "牛奶", "汽水", "啤酒", "葡萄酒", "威士忌", "伏特加",
    "朗姆酒", "龙舌兰", "杜松子酒", "白兰地", "香槟", "普罗塞克", "柠檬水", "冰茶", "奶昔", "奶昔",
    "拿铁", "卡布奇诺", "浓缩咖啡", "美式咖啡", "摩卡", "玛奇朵", "平白", "绿茶", "红茶", "乌龙茶",
    "草本茶", "洋甘菊茶", "薄荷茶", "姜茶", "椰子水", "能量饮料", "运动饮料", "鸡尾酒", "苹果酒", "康普茶",

    // 衣服 (50)
    "衬衫", "T恤", "裤子", "牛仔裤", "短裤", "裙子", "连衣裙", "夹克", "大衣", "毛衣",
    "连帽衫", "背心", "西装", "领带", "皮带", "帽子", "帽子", "毛线帽", "围巾", "手套",
    "袜子", "内衣", "胸罩", "拳击手", "睡衣", "泳衣", "比基尼", "泳裤", "靴子", "鞋",
    "运动鞋", "凉鞋", "拖鞋", "高跟鞋", "平底鞋", "莫卡辛鞋", "拖鞋", "木屐", "牛津鞋", "高跟鞋",
    "项链", "戒指", "手镯", "耳环", "吊坠", "胸针", "手表", "眼镜", "太阳镜", "口罩",

    // 天气 (40)
    "晴朗", "下雨", "多云", "下雪", "刮风", "暴风雨", "雾蒙蒙", "冰雹", "雨夹雪", "雷",
    "闪电", "彩虹", "龙卷风", "飓风", "暴风雪", "干旱", "热浪", "寒冷", "霜", "露水",
    "湿度", "微风", "大风", "台风", "气旋", "季风", "雪崩", "海啸", "地震", "火山",
    "雨", "雪", "冰", "风", "云", "太阳", "月亮", "星星", "流星", "彗星",

    // 音乐 (50)
    "摇滚", "流行", "嘻哈", "说唱", "乡村", "蓝调", "爵士乐", "古典", "电子", "舞蹈",
    "雷鬼", "金属", "朋克", "民谣", "福音", "歌剧", "节奏布鲁斯", "灵魂", "独立", "另类",
    "垃圾", "科技", "房子", "出神", "迪斯科", "放克", "摇摆", "萨尔萨", "探戈", "华尔兹",
    "芭蕾", "踢踏舞", "爵士舞", "当代", "霹雳舞", "音乐剧", "卡拉OK", "音乐会", "节日", "乐队",
    "乐团", "唱诗班", "吉他", "钢琴", "鼓", "小提琴", "小号", "萨克斯风", "长笛", "口琴",

    // 学校/学习 (40)
    "学校", "大学", "学院", "学生", "教师", "教室", "桌子", "黑板", "白板", "铅笔",
    "橡皮擦", "书", "笔记本", "背包", "储物柜", "走廊", "食堂", "操场", "体育馆", "图书馆",
    "计算机室", "科学实验室", "艺术课", "音乐课", "数学", "英语", "历史", "地理", "科学", "物理",
    "化学", "生物", "文学", "哲学", "心理学", "社会学", "经济学", "商业", "法律", "医学",

    // 简单动物 (continued)
    "兔子", "小狗", "小猫", "羊羔", "小鸡", "鸭子", "小猪", "小牛", "小马", "小马",
    "山羊", "羊", "牛", "公牛", "牛", "驴", "骡子", "骆驼", "羊驼", "羊驼",
    "鹿", "麋鹿", "驼鹿", "驯鹿", "羚羊", "水牛", "野牛", "牦牛", "斑马", "长颈鹿",

    // 简单物品 (continued)
    "玩具", "娃娃", "人偶", "拼图", "游戏", "卡片", "骰子", "弹珠", "溜溜球", "风筝",
    "自行车", "三轮车", "滑板车", "滑板", "轮滑", "电动滑冰鞋", "雪橇", "雪橇", "冲浪板", "滑板",
    "桶", "铲", "耙", "扫帚", "拖把", "毛巾", "毯子", "枕头", "垫子", "床垫",
    "绳子", "绳子", "电线", "锁链", "钩子", "钉子", "螺钉", "螺栓", "螺帽", "扳手",

    // 简单动作 (continued)
    "跳跃", "跳过", "跳跃", "爬行", "攀爬", "滑动", "摇摆", "滚动", "旋转", "扭转",
    "弯曲", "伸展", "伸手", "抓住", "拿住", "释放", "投掷", "接住", "踢", "推",
    "拉", "拖", "提升", "降低", "抬高", "掉落", "反弹", "滚动", "滑动", "滑行",
    "挥手", "指向", "鼓掌", "打响指", "跺脚", "敲", "轻拍", "擦", "挠", "抓",

    // 假期 (30)
    "春节", "元宵节", "清明节", "端午节", "中秋节", "重阳节", "冬至", "腊八节", "除夕", "国庆节",
    "情人节", "妇女节", "儿童节", "母亲节", "父亲节", "教师节", "劳动节", "植树节", "圣诞节", "新年",
    "生日", "纪念日", "婚礼", "结婚蛋糕", "毕业", "舞会", "游行", "节日", "音乐会", "运动会",

    // 玩具和游戏 (40)
    "乐高", "积木", "娃娃", "人偶", "毛绒动物", "拼图", "象棋", "围棋", "跳棋", "中国象棋",
    "麻将", "扑克牌", "卡牌游戏", "视频游戏", "PlayStation", "Xbox", "任天堂Switch", "电脑游戏", "手机游戏", "街机游戏",
    "马克笔", "蜡笔", "彩色铅笔", "油漆", "刷子", "调色板", "画布", "素描本", "白板", "贴纸",
    "气球", "五彩纸屑", "彩带", "横幅", "装饰", "派对帽", "派对吹奏", "面具", "服装", "化妆",

    // 交通 (30)
    "汽车", "卡车", "公交车", "货车", "火车", "地铁", "有轨电车", "出租车", "自行车", "摩托车",
    "飞机", "直升机", "热气球", "帆船", "快艇", "游艇", "潜艇", "火箭", "宇宙飞船", "气垫船",
    "滑板", "轮滑", "滑板车", "Segway", "马", "骆驼", "大象", "船", "独木舟", "皮划艇",

    // 厨房 (30)
    "冰箱", "冷柜", "炉灶", "烤箱", "微波炉", "洗碗机", "水槽", "台面", "餐桌", "椅子",
    "刀", "叉", "勺子", "盘子", "碗", "杯子", "玻璃杯", "杯子", "锅", "锅",
    "铲", "木勺", "打蛋器", "料理机", "烤面包机", "水壶", "咖啡机", "开罐器", "削皮器", "磨碎机",

    // 卧室 (25)
    "床", "枕头", "毯子", "床单", "被子", "床垫", "床头", "床头柜", "梳妆台", "衣柜",
    "衣柜", "柜子", "架子", "镜子", "灯", "闹钟", "窗", "窗帘", "百叶窗", "门",
    "地毯", "地毯", "椅子", "桌子", "抽屉", "衣架",

    // 浴室 (20)
    "马桶", "浴缸", "淋浴", "水槽", "水龙头", "镜子", "医药柜", "毛巾架", "肥皂分配器", "牙刷架",
    "垃圾桶", "卫生纸", "浴垫", "淋浴幕", "牙刷", "牙膏", "梳子", "刷子", "秤", "肥皂",

    // 简单动词 (40)
    "吃", "喝", "睡觉", "醒", "跑", "走", "坐", "站", "跳", "跳舞",
    "唱", "喊", "低语", "笑", "哭", "微笑", "皱眉", "眨眼", "点头", "摇头",
    "挥手", "鼓掌", "打响指", "踢", "打", "投掷", "接住", "拿住", "掉落", "拿起",
    "放", "拿", "给", "获取", "制造", "做", "去", "来", "留下", "离开",

    // 简单形容词 (40)
    "大", "小", "高", "短", "长", "宽", "窄", "厚", "薄", "快",
    "慢", "热", "冷", "温暖", "凉爽", "柔软", "硬", "粗糙", "光滑", "湿",
    "干", "干净", "脏", "明亮", "黑暗", "光线", "重", "轻", "强", "弱",
    "好", "坏", "对", "错", "真", "假", "新", "旧", "年轻", "古老",

    // 颜色 (20)
    "红色", "蓝色", "黄色", "绿色", "橙色", "紫色", "粉红色", "棕色", "黑色", "白色",
    "灰色", "灰色", "银色", "金色", "米色", "青绿色", "青色", "品红色", "石灰色", "深蓝色",

    // 数字 (20)
    "一", "二", "三", "四", "五", "六", "七", "八", "九", "十",
    "十一", "十二", "十三", "十四", "十五", "二十", "三十", "一百", "一千", "一百万",

    // 形状 (15)
    "圆形", "正方形", "三角形", "矩形", "五边形", "六边形", "八边形", "椭圆形", "钻石形", "星形",
    "心形", "立方体", "球体", "圆锥", "圆柱体", "金字塔", "棱柱",

    // 月份 (12)
    "一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月",

    // 日子 (7)
    "星期一", "星期二", "星期三", "星期四", "星期五", "星期六", "星期日",

    // 季节 (4)
    "春季", "夏季", "秋季", "冬季",
];

// Game state
let state = {
    players: 2,
    duration: 60,
    currentPlayer: 1,
    scores: {},
    currentWord: null,
    usedWords: [],
    currentScore: 0,
    timeLeft: 60,
    timerInterval: null,
    isPlaying: false
};

// DOM
const setupScreen = document.getElementById('setupScreen');
const readyScreen = document.getElementById('readyScreen');
const gameScreen = document.getElementById('gameScreen');
const resultsScreen = document.getElementById('resultsScreen');
const startBtn = document.getElementById('startBtn');
const readyBtn = document.getElementById('readyBtn');
const correctBtn = document.getElementById('correctBtn');
const skipBtn = document.getElementById('skipBtn');
const playAgainBtn = document.getElementById('playAgainBtn');

// Initialize scores
function initGame() {
    state.players = parseInt(document.getElementById('playerCount').value);
    state.duration = parseInt(document.getElementById('gameDuration').value);
    state.currentPlayer = 1;
    state.scores = {};
    state.usedWords = [];

    for (let i = 1; i <= state.players; i++) {
        state.scores[i] = 0;
    }

    showReadyScreen();
}

// Show ready screen for next player
function showReadyScreen() {
    setupScreen.style.display = 'none';
    gameScreen.style.display = 'none';
    resultsScreen.style.display = 'none';
    readyScreen.style.display = 'block';

    document.getElementById('readyPlayerNum').textContent = state.currentPlayer;
}

// Start a player's turn
function startTurn() {
    state.currentScore = 0;
    state.timeLeft = state.duration;
    state.isPlaying = true;

    readyScreen.style.display = 'none';
    resultsScreen.style.display = 'none';
    gameScreen.style.display = 'block';

    document.getElementById('currentPlayer').textContent = state.currentPlayer;
    document.getElementById('playerScore').textContent = state.currentScore;

    drawWord();
    startTimer();
}

// Draw a random word
function drawWord() {
    if (state.usedWords.length === WORDS.length) {
        state.usedWords = [];
    }

    let word;
    do {
        word = WORDS[Math.floor(Math.random() * WORDS.length)];
    } while (state.usedWords.includes(word));

    state.usedWords.push(word);
    state.currentWord = word;
    document.getElementById('wordDisplay').textContent = word;
}

// Start countdown timer
function startTimer() {
    clearInterval(state.timerInterval);

    state.timerInterval = setInterval(() => {
        state.timeLeft--;
        document.getElementById('timer').textContent = state.timeLeft;

        if (state.timeLeft <= 0) {
            endTurn();
        }
    }, 1000);
}

// Handle correct answer
function handleCorrect() {
    state.currentScore++;
    state.scores[state.currentPlayer]++;
    document.getElementById('playerScore').textContent = state.currentScore;
    drawWord();
}

// Handle skip
function handleSkip() {
    drawWord();
}

// End current player's turn
function endTurn() {
    state.isPlaying = false;
    clearInterval(state.timerInterval);

    if (state.currentPlayer < state.players) {
        state.currentPlayer++;
        showReadyScreen();
    } else {
        showResults();
    }
}

// Show final results
function showResults() {
    gameScreen.style.display = 'none';
    resultsScreen.style.display = 'block';

    let html = '';
    const sorted = Object.entries(state.scores).sort((a, b) => b[1] - a[1]);

    sorted.forEach(([player, score], index) => {
        const medal = index === 0 ? '🥇' : index === 1 ? '🥈' : '🥉';
        html += `<div class="score-row">${medal} Player ${player}: <strong>${score}</strong> points</div>`;
    });

    document.getElementById('finalScores').innerHTML = html;
}

// Event listeners
startBtn.addEventListener('click', initGame);
readyBtn.addEventListener('click', startTurn);
correctBtn.addEventListener('click', () => {
    if (state.isPlaying) handleCorrect();
});
skipBtn.addEventListener('click', () => {
    if (state.isPlaying) handleSkip();
});
playAgainBtn.addEventListener('click', () => {
    setupScreen.style.display = 'block';
    gameScreen.style.display = 'none';
    resultsScreen.style.display = 'none';
    readyScreen.style.display = 'none';
});

// Accordion functionality
document.addEventListener('DOMContentLoaded', function() {
    const accordionButtons = document.querySelectorAll('.accordion-button');

    accordionButtons.forEach(button => {
        button.addEventListener('click', function() {
            const accordionContent = this.nextElementSibling;
            const isActive = this.classList.contains('active');

            // Close all other accordions
            accordionButtons.forEach(otherButton => {
                if (otherButton !== button && otherButton.classList.contains('active')) {
                    otherButton.classList.remove('active');
                    otherButton.nextElementSibling.classList.remove('active');
                }
            });

            // Toggle current accordion
            this.classList.toggle('active');
            accordionContent.classList.toggle('active');
        });
    });
});
