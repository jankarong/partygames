<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="在线狼人杀桌游 - 经典社交推理游戏！体验刺激的狼人杀，村民与狼人的终极对决，考验逻辑推理和演技。适合6-15人聚会游戏，支持多种角色配置，完美的朋友聚会、团建活动必备游戏。免费在线玩！">
    <meta name="keywords" content="狼人杀,桌游,社交推理游戏,聚会游戏,在线狼人杀">
    <meta name="author" content="Party Games">
    <meta property="og:title" content="狼人杀桌游 - 在线社交推理游戏">
    <meta property="og:description" content="在线狼人杀桌游 - 经典社交推理游戏！体验刺激的狼人杀，适合6-15人的聚会游戏。">
    <meta property="og:type" content="website">
    <meta property="og:image" content="../../../games/mafia/mafialogo.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="狼人杀桌游 - 在线社交推理游戏">
    <meta name="twitter:description" content="在线狼人杀桌游 - 经典刺激的社交推理游戏，适合6-15人！">
    <meta name="twitter:image" content="../../../games/mafia/mafialogo.png">
    <title>狼人杀桌游在线 - 经典社交推理游戏，6-15人多人聚会必备</title>
    <link rel="canonical" href="https://partygames.com/zh/games/mafia/mafia">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../../../games/mafia/mafialogo.png">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Game",
        "name": "狼人杀桌游",
        "description": "在线狼人杀桌游 - 经典社交推理游戏！体验刺激的狼人杀，村民需要找出隐藏的狼人。",
        "genre": "Board Game",
        "numberOfPlayers": "6-15",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "320"
        }
    }
    </script>

    <link
        href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Cinzel:wght@500;700&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../games/mafia/mafia.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
    <link rel="stylesheet" href="../../../css/gameheader.css">

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "q4t8s17fvw");
    </script>

    <!-- Adsense is loaded conditionally by /js/ads-controller.js -->

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BYYFLML78Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-BYYFLML78Z');
    </script>
</head>

<body>
    <!-- Enhanced Navigation will be inserted by JavaScript -->
    <div class="container py-4">
        <img src="../../../games/mafia/mafialogo.png" alt="狼人杀桌游标志" class="game-logo">
        <h1 class="text-center mb-4">狼人杀桌游</h1>

        <div class="game-setup">
            <div class="setup-section card shadow-sm">
                <div class="card-body">
                    <h2 class="card-title">游戏设置</h2>
                    <div class="total-players mb-4">
                        <label for="playerCount" class="form-label">总玩家数：</label>
                        <input type="number" id="playerCount" class="form-control" min="6" max="15" value="8">
                    </div>

                    <div class="role-selection">
                        <h3 class="h5 mb-3">角色分配</h3>
                        <div class="role-inputs row g-3">
                            <div class="role-input col-md-4">
                                <label for="mafiaCount" class="form-label">狼人：</label>
                                <input type="number" id="mafiaCount" class="form-control" min="1" value="2">
                            </div>
                            <div class="role-input col-md-4">
                                <label for="doctorCount" class="form-label">医生：</label>
                                <input type="number" id="doctorCount" class="form-control" min="0" max="1" value="1">
                            </div>
                            <div class="role-input col-md-4">
                                <label for="detectiveCount" class="form-label">预言家：</label>
                                <input type="number" id="detectiveCount" class="form-control" min="0" max="1" value="1">
                            </div>
                            <div class="role-input col-md-4">
                                <label for="villagerCount" class="form-label">村民：</label>
                                <input type="number" id="villagerCount" class="form-control" min="1" value="4">
                            </div>
                        </div>

                        <!-- 自定义角色区域 -->
                        <div id="customRoleInputs" class="row g-3 mt-2"></div>
                        <div class="role-summary mt-3">
                            <p class="role-warning text-danger" id="roleWarning"></p>
                        </div>
                    </div>

                    <button id="setupGame" class="btn btn-primary w-100 mt-3">开始游戏</button>
                    <button id="manageRoles" class="btn btn-secondary w-100 mt-3">管理自定义角色</button>
                </div>
            </div>
        </div>

        <div class="role-management mt-4" style="display: none;">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h2 class="card-title text-center mb-4">自定义角色管理</h2>

                    <!-- 创建新角色 -->
                    <div class="create-role-section mb-5">
                        <h4 class="mb-3">创建新角色</h4>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="roleName" class="form-label">角色名称</label>
                                <input type="text" id="roleName" class="form-control" placeholder="例如：丘比特">
                            </div>
                            <div class="col-md-6">
                                <label for="roleTeam" class="form-label">阵营</label>
                                <select id="roleTeam" class="form-select">
                                    <option value="villager">村民阵营</option>
                                    <option value="mafia">狼人阵营</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label for="roleDescription" class="form-label">角色描述</label>
                                <textarea id="roleDescription" class="form-control" rows="3"
                                    placeholder="描述这个角色的能力和作用..."></textarea>
                            </div>
                            <div class="col-12">
                                <label for="roleAbility" class="form-label">夜晚能力</label>
                                <textarea id="roleAbility" class="form-control" rows="2"
                                    placeholder="描述这个角色在夜晚阶段的行动...（可选）"></textarea>
                            </div>
                        </div>
                        <button id="createRole" class="btn btn-primary mt-3">创建角色</button>
                    </div>

                    <!-- 现有角色列表 -->
                    <div class="existing-roles-section mb-4">
                        <h4 class="mb-3">现有角色</h4>
                        <div id="rolesList" class="row g-3"></div>
                    </div>

                    <div class="text-center">
                        <button id="backToSetup" class="btn btn-secondary">返回游戏设置</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="game-area mt-4 position-relative" style="display: none;">
            <button id="returnToSetup" class="btn btn-secondary"
                style="position: absolute; left: 20px; top: 20px; z-index: 1000;">
                <i class="fas fa-arrow-left"></i>
                <span class="btn-text">返回设置</span>
            </button>
            <button id="startNewGame" class="btn btn-success"
                style="position: absolute; right: 20px; top: 20px; z-index: 1000;">
                <i class="fas fa-redo"></i>
                <span class="btn-text">开始新游戏</span>
            </button>
            <div class="role-cards card shadow-sm mt-5">
                <div class="card-body">
                    <h2 class="card-title text-center mb-4">玩家身份卡</h2>
                    <div id="cardGrid"></div>
                </div>
            </div>

            <div class="game-controls mt-4" style="display: none;">
                <button id="startGame" class="btn btn-success btn-lg w-100">
                    <i class="fas fa-play-circle me-2"></i>
                    开始夜晚阶段
                </button>
            </div>

            <div class="role-instructions card shadow-sm mt-4" style="display: none;">
                <div class="card-body">
                    <h2 class="card-title">角色说明</h2>
                    <div id="mafiaInstructions" class="role-instruction">
                        <h3 class="h5">狼人</h3>
                        <ul>
                            <li>对其他玩家隐藏你的身份</li>
                            <li>在夜晚与其他狼人一起商量淘汰村民</li>
                            <li>在白天伪装成村民，避免被发现</li>
                        </ul>
                    </div>
                    <div id="villagerInstructions" class="role-instruction">
                        <h3 class="h5">村民</h3>
                        <ul>
                            <li>与其他村民合作，找出并淘汰狼人</li>
                            <li>仔细观察其他玩家的行为</li>
                            <li>在白天投票阶段淘汰可疑的狼人</li>
                        </ul>
                    </div>
                    <div id="doctorInstructions" class="role-instruction">
                        <h3 class="h5">医生</h3>
                        <ul>
                            <li>每晚可以保护一名玩家免于被淘汰</li>
                            <li>可以保护自己</li>
                            <li>保持身份秘密</li>
                        </ul>
                    </div>
                    <div id="detectiveInstructions" class="role-instruction">
                        <h3 class="h5">预言家</h3>
                        <ul>
                            <li>每晚可以查验一名玩家的身份</li>
                            <li>利用你的信息引导村民</li>
                            <li>保持身份秘密</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="night-actions card shadow-sm mt-4" style="display: none;">
                <div class="card-body">
                    <h2 class="card-title">夜晚阶段</h2>
                    <div id="narrator-text" class="mb-4"></div>

                    <div id="action-area">
                        <div id="mafia-action" class="role-action" style="display: none;">
                            <h3>狼人行动</h3>
                            <p>选择一名玩家淘汰：</p>
                            <div id="mafia-targets" class="player-selection"></div>
                            <button id="confirm-mafia" class="btn btn-danger mt-3">确认选择</button>
                        </div>

                        <div id="doctor-action" class="role-action" style="display: none;">
                            <h3>医生行动</h3>
                            <p id="doctor-prompt"></p>
                            <div id="doctor-choice" class="d-flex flex-column gap-2">
                                <button id="save-player" class="btn btn-primary mt-3">救人</button>
                                <button id="poison-player" class="btn btn-danger mt-3">下毒</button>
                                <button id="skip-action" class="btn btn-secondary mt-3">跳过行动</button>
                            </div>
                            <div id="doctor-targets" class="player-selection" style="display: none;"></div>
                            <button id="confirm-doctor" class="btn btn-primary mt-3"
                                style="display: none;">确认选择</button>
                        </div>

                        <div id="detective-action" class="role-action" style="display: none;">
                            <h3>预言家行动</h3>
                            <p>选择一名玩家查验：</p>
                            <div id="detective-targets" class="player-selection"></div>
                            <div id="investigation-result" class="mt-3" style="display: none;">
                                <p id="investigation-text" class="result-text"></p>
                                <button id="confirm-detective" class="btn btn-primary mt-3">继续</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="discussion-phase" class="discussion-phase" style="display: none;">
                <h3>讨论时间</h3>
                <div class="night-summary mb-4">
                    <p id="night-result" class="mb-3"></p>
                    <div id="player-statuses" class="player-status-grid"></div>
                </div>
                <p class="discussion-prompt">讨论一下你认为谁可能是狼人。</p>
                <button id="end-discussion" class="btn btn-primary mt-4">结束讨论</button>
            </div>

            <div class="voting-phase card shadow-sm mt-4" style="display: none;">
                <div class="card-body">
                    <h2 class="card-title">投票阶段</h2>
                    <p class="voting-prompt">投票选出你认为是狼人的玩家：</p>
                    <div id="voting-grid" class="voting-grid mt-3"></div>
                    <button id="confirm-vote" class="btn btn-primary mt-4">确认投票</button>
                </div>
            </div>

            <div class="player-status card shadow-sm mt-4" style="display: none;">
                <div class="card-body">
                    <h2 class="card-title">玩家状态</h2>
                    <div id="playerStatus" class="list-group mt-3"></div>
                </div>
            </div>
        </div>

        <div class="custom-alert" style="display: none;">
            <div class="alert-content card">
                <div class="card-body text-center">
                    <div class="alert-message mb-3"></div>
                    <div class="d-flex flex-column align-items-center">
                        <button class="btn btn-primary alert-confirm">确定</button>
                        <button id="playAgainBtn" class="btn btn-success mt-2" style="display: none;">再玩一局</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="rules-section card shadow-sm mt-4">
            <div class="card-body text-white">
                <h2 class="card-title text-white">游戏规则</h2>

                <h3>游戏概述</h3>
                <p>狼人杀是一款刺激的社交推理游戏，玩家秘密分为两个阵营：狼人和村民。游戏在夜晚和白天阶段之间交替进行，直到其中一方获胜。</p>

                <h3>狼人杀游戏规则</h3>
                <ul>
                    <li><strong>总玩家数：</strong>6-15人</li>
                    <li><strong>狼人：</strong>邪恶阵营，彼此知道身份（1-3人）</li>
                    <li><strong>村民：</strong>普通村民，试图找出狼人</li>
                    <li><strong>医生：</strong>特殊村民，可以救人也可以下毒（0-1人）</li>
                    <li><strong>预言家：</strong>特殊村民，每晚可以查验一名玩家身份（0-1人）</li>
                </ul>

                <h3>游戏流程</h3>
                <ol>
                    <li><strong>设置阶段：</strong>
                        <ul>
                            <li>每位玩家获得一张秘密身份卡</li>
                            <li>玩家必须保守身份秘密，除非被淘汰</li>
                        </ul>
                    </li>
                    <li><strong>夜晚阶段：</strong>
                        <ul>
                            <li>所有玩家"睡觉"（闭上眼睛）</li>
                            <li>狼人醒来选择淘汰一名玩家</li>
                            <li>医生醒来可以选择救人或下毒</li>
                            <li>预言家醒来查验一名玩家身份</li>
                        </ul>
                    </li>
                    <li><strong>白天阶段：</strong>
                        <ul>
                            <li>所有玩家"醒来"</li>
                            <li>公布夜晚行动结果</li>
                            <li>玩家讨论谁可能是狼人</li>
                            <li>投票淘汰一名可疑的狼人</li>
                        </ul>
                    </li>
                </ol>

                <h3>特殊能力</h3>
                <ul>
                    <li><strong>医生能力：</strong>
                        <ul>
                            <li>游戏中可以救一名玩家（包括自己）一次</li>
                            <li>游戏中可以毒一名玩家一次</li>
                            <li>每晚必须选择救人、下毒或跳过</li>
                        </ul>
                    </li>
                    <li><strong>预言家能力：</strong>
                        <ul>
                            <li>每晚可以查验一名玩家</li>
                            <li>得知被查验玩家是否为狼人</li>
                        </ul>
                    </li>
                </ul>

                <h3>胜利条件</h3>
                <ul>
                    <li><strong>村民胜利：</strong>淘汰所有狼人</li>
                    <li><strong>狼人胜利：</strong>狼人数量等于或超过村民数量</li>
                </ul>

                <h3>狼人杀游戏技巧</h3>
                <ul>
                    <li>仔细观察讨论中玩家的行为表现</li>
                    <li>特殊角色（医生和预言家）要小心暴露身份</li>
                    <li>策略性投票 - 有时弃票可能是最好的策略</li>
                    <li>狼人要在讨论中伪装成村民</li>
                    <li>固定团队反复游戏有助于发展策略</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/ads-controller.js"></script>
    <script src="../../js/game-navigation-zh.js"></script>
    <script src="mafia-zh.js?v=12"></script>

    <!-- Floating Ad -->
    <link rel="stylesheet" href="../../../css/floating-ad.css">
    <script src="../../../js/floating-ad.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof FloatingAdManager !== 'undefined') {
                new FloatingAdManager({
                    showDelay: 3000,
                    rememberClosure: true,
                    adCode: `
                        <a rel="sponsored" href="https://shopify.pxf.io/c/6627714/3323847/13624" target="_top" id="3323847">
                            <img src="//a.impactradius-go.com/display-ad/13624-3323847" border="0" alt="" width="1456" height="180"/>
                        </a>
                        <img height="0" width="0" src="https://imp.pxf.io/i/6627714/3323847/13624" style="position:absolute;visibility:hidden;" border="0" />
                    `
                    
                });
            }
        });
    </script>
</body>

</html>

